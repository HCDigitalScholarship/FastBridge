{% extends "base.html" %}
{% block content %}
<style>
    body {
        padding-top: 15px;
        padding-bottom: 30px;
    }

    h3 {
        font-size: 18px;
    }

    .statistics-list {
        list-style-type: none;
        text-align: left;
        width: fit-content;
        margin: 0 auto;
        padding: 0;
    }

    .statistics-list li {
        font-size: 16px;
        padding: 5px 0;
    }

    .statistics-list .label {
        font-weight: bold;
        padding-right: 10px;
    }
    .scrollable {
        max-height: 600px;
        overflow-y: scroll;

        scrollbar-width: thin;
        scrollbar-color: #888 transparent;
    }

    .scrollable::-webkit-scrollbar {
        width: 8px;
    }

    .scrollable::-webkit-scrollbar-track {
        background: transparent;
    }

    .scrollable::-webkit-scrollbar-thumb {
        background-color: #888;    
        border-radius: 4px;
    }

    .scrollable::-webkit-scrollbar-thumb:hover {
        background-color: #555;    
    }


    .collapsible {
        cursor: pointer;
        text-align: left;
        outline: none;
        width: 100%;
        border: none;
        background-color: transparent;
        color: white;
        font-size: 18px;
    }

    .content {
        padding: 0 18px;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
    }

    .content ul {
        display: flex;
        flex-wrap: wrap;
        padding: 0;
    }

    .content ul li {
        margin-right: 10px;
        list-style: none;
    }

    .page-title {
        text-align: center;
        background-color: rgba(0, 0, 0, 0.6);
        padding: 15px 20px;
        margin-top: 30px;
        margin-bottom: 20px;
    }

    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
    }


    .grid-item {
        background-color: rgba(0, 0, 0, 0.6);
        padding: 15px 20px;
    }

    .plot-img {
        width: 100%;
        transition: transform 0.25s ease-in-out;
        cursor: zoom-in;
        margin-bottom: 3rem;
    }

    .plot-img.enlarged {
        transform: scale(3);
        cursor: zoom-out;
        z-index: 10;
        position: relative;
    }

    #slideOut {
        position: fixed;
        width: 300px;
        top: 120px;
        right: -300px;
        background-color: rgb(81, 81, 81, 0.9);
        z-index: 100000000;
        transition-property: all;
        transition-duration: 0.5s;
        transition-timing-function: cubic-bezier(0, 1, 0.5, 1);
    }

    /* Display slideOut */

    .showSlideOut {
        right: 0px !important;
    }

    /* Tab */

    .slideOutTab {
        top: 8vh;
        position: absolute;
        left: -40px;
        height: 200px;
        width: 40px;
        -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        background-color: #228383;
        color: #ffffff;
        border-radius: 5px 0px 0px 5px;
        z-index: 100000000;
    }

    .slideOutTab div {
        text-align: center;
        position: relative;
        right: 70px;
        top: 90px;
        background-color: inherit;
        color: #ffffff;
        width: 180px;
        -webkit-transform: rotate(270deg);
        -moz-transform: rotate(270deg);
        -o-transform: rotate(270deg);
        writing-mode: lr-tb;
    }

    .custom-control.custom-checkbox {
        text-align: left;
    }

    @media print {

        header,
        footer {
            display: none;
        }

        #slideOut {
            display: none !important;
        }

        ul.statistics-list {
            max-height: none !important;
            overflow-y: visible !important;
        }
    }

    .indent-checkbox {
        padding-left: 40px;
    }

    .indent-indent-checkbox {
        padding-left: 60px;
    }

    #plots {
        max-height: 800px;/*500px*/
    }

    /* The Modal (background) */
    .modal {
        display: none;
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        padding-top: 200px;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgb(0, 0, 0);
        /* Fallback color */
        background-color: rgba(0, 0, 0, 0.9);
    }

    /* Modal Content (Image) */
    .plot-modal-content {
        margin: auto;
        display: block;
        max-width: 60%;
        max-height: 80%;
        object-fit: contain;
    }

    /* The Close Button */
    .close {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
    }

    .close:hover,
    .close:focus {
        color: #bbb;
        text-decoration: none;
        cursor: pointer;
    }

    .list-item-container {
        display: flex;
        justify-content: space-between;
    }

    .label-container {
        text-align: right;
        margin-right: 20px; 
    }

    .value-container {
        text-align: left;
    }
    .title{
        font-family: 'Times New Roman', serif; 
        font-size: 40px; 
        font-weight: normal; 
        color: #ffffff;
    }
    .section_span{
        font-family: 'Times New Roman', serif; 
        font-size: 24px;
    }
    .section_label{
        font-family: Actor, sans-serif; 
        font-size: 28px; 
        color: #ffffff; 
        margin-bottom: 15px; 
        font-weight: normal; 
        font-style: normal;
    }
</style>


<body id="page-top">
    <header class="masthead"
        style="background-image: url('/assets/img/stats_background_2.jpg') ;background-size: cover;">
        <div id="slideOut">
            <div id="slideOutTab" class="slideOutTab">
                <div>
                    <p style="font-family: sans-serif; font-size:1.5rem;">Options</p>
                </div>
            </div>

            <div class="modal-content" style="background-color:rgba(110,110,110,0.97)">
                <div class="modal-header">
                    <h4 class="modal-title">Toggle your Stats!</h4>
                </div>
                <div class="modal-body" style="overflow-y:auto;height:65vh">
                    <!-- Checkboxes -->
                    <div class="form-group" style="width:100%;">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default" style="width:50%" id="printSubmit"
                                value="Print" onclick="printData();" title="Print table">Print</button>
                            <button type="button" class="btn btn-default" style="width:50%" onclick="get_pdf();">Export
                                as PDF</button>
                        </div>
                        <!-- Checkboxes for toggling metrics -->
                        <div class="custom-control custom-checkbox">
                            <input id="metricsCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleMetrics();" checked>
                            <label class="custom-control-label" for="metricsCheckbox">Metrics Section</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input type="checkbox" id="wordCountCheckbox" class="custom-control-input"
                                onclick="toggleWordCount()">
                            <label class="custom-control-label" for="wordCountCheckbox">Total Words</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-indent-checkbox">
                            <input type="checkbox" id="wordCountNoProperCheckbox" class="custom-control-input"
                                onclick="toggleWordCountNoProper()">
                            <label class="custom-control-label" for="wordCountNoProperCheckbox">Word Count(Proper
                                Excluded)</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input type="checkbox" id="vocabSizeCheckbox" class="custom-control-input"
                                onclick="toggleVocabSize()">
                            <label class="custom-control-label" for="vocabSizeCheckbox">Unique Words</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-indent-checkbox">
                            <input type="checkbox" id="vocabSizeNoProperCheckbox" class="custom-control-input"
                                onclick="toggleVocabSizeNoProper()">
                            <label class="custom-control-label" for="vocabSizeNoProperCheckbox">Unique Words(Proper
                                Excluded)</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input type="checkbox" id="avgWordCheckbox" class="custom-control-input"
                                onclick="toggleAverageWordLength()">
                            <label class="custom-control-label" for="avgWordCheckbox">Average Word Length</label>
                        </div>


                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="lexrCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleLexR();" checked>
                            <label class="custom-control-label" for="lexrCheckbox">LexR</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input type="checkbox" id="lexDensityCheckbox" class="custom-control-input"
                                onclick="toggleLexicalDensity()">
                            <label class="custom-control-label" for="lexDensityCheckbox">Lexical Density</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="lexicalSophisticationCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleLexicalSophistication();" checked>
                            <label class="custom-control-label" for="lexicalSophisticationCheckbox">Lexical
                                Sophistication</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="lexVarCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleLexVar();" checked>
                            <label class="custom-control-label" for="lexVarCheckbox">Lexical Variation</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-indent-checkbox">
                            <input id="ttrCheckbox" type="checkbox" class="custom-control-input" onclick="toggleTTR();"
                                checked>
                            <label class="custom-control-label" for="ttrCheckbox">TTR</label>
                        </div>

                        <div class="custom-control custom-checkbox indent-indent-checkbox">
                            <input id="rootTtrCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleRootTTR();" checked>
                            <label class="custom-control-label" for="rootTtrCheckbox">Root TTR</label>
                        </div>

                        <div class="custom-control custom-checkbox indent-indent-checkbox">
                            <input id="cttrCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleCTTR();" checked>
                            <label class="custom-control-label" for="cttrCheckbox">CTTR</label>
                        </div>

                        <div class="custom-control custom-checkbox indent-indent-checkbox">
                            <input id="logTtrCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleLogTTR();" checked>
                            <label class="custom-control-label" for="logTtrCheckbox">LogTTR</label>
                        </div>



                        <div class="custom-control custom-checkbox">
                            <input id="plotsCheckbox" type="checkbox" class="custom-control-input"
                                onclick="togglePlots();" checked>
                            <label class="custom-control-label" for="plotsCheckbox">Plots Section</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="freqPlotCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleFreqPlot();" checked>
                            <label class="custom-control-label" for="freqPlotCheckbox">Frequency Plot</label>
                        </div>

                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="cumLexPlotCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleCumLexPlot();" checked>
                            <label class="custom-control-label" for="cumLexPlotCheckbox">Cumulative Lexical Load
                                Plot</label>
                        </div>

                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="linLexPlotCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleLinLexPlot();" checked>
                            <label class="custom-control-label" for="linLexPlotCheckbox">Linear Lexical Load
                                Plot</label>
                        </div>
                        <div class="custom-control custom-checkbox indent-checkbox">
                            <input id="freqBinPlotCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleFreqBinPlot();" checked>
                            <label class="custom-control-label" for="freqBinPlotCheckbox">Frequency Bin Plot</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input id="hapaxCheckbox" type="checkbox" class="custom-control-input"
                                onclick="toggleHapax();" checked>
                            <label class="custom-control-label" for="hapaxCheckbox">Hapax Legomena</label>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="intro-body">
            <div class="container">
                <div class="page-title">
                    <p class="intro-text"
                        style="font-family: Cabin, sans-serif;font-size: 30px;margin-bottom: 45px;font-weight: normal;margin-top: 120px;">
                        Readability Statistics for ...</p>
                    {% if text_name is not string %}
                        {% for title in text_name %}
                            <h1 class='title'>{{title}}</h1>
                            <h2 class='section_label'>
                                Start: <span class='section_span'> {{ start_section[loop.index-1] }} </span>
                                End: <span class='section_span'> {{ end_section[loop.index-1] }} </span>
                            </h2>
                            {%if loop.index < text_name|length%}<h4>+</h4>{%endif%}
                        {% endfor %}
                        
                    {% else %}
                        <h1 class='title'> {{ text_name }} </h1>
                        <h2 class='section_label'>
                            Start: <span class='section_span'> {{ start_section }} </span>
                            End: <span class='section_span'> {{ end_section }} </span>
                        </h2>
                    {% endif %}
                    <br>
                    <h3>
                        <a href="/stats/formulas" class="btn btn-info ml-2" role="button">Description of Readability Metrics</a>
                    </h3>

                </div>
                <div class="grid-container">
                    <!-- Metrics Section -->
                    <div class="grid-item" id="metrics-section">
                        <h2>Metrics</h2>
                        <ul class="statistics-list">
                            <li id="lexRMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">LexR</span>
                                    
                                    </div>
                                    <div class="value-container">{{ LexR }}</div>
                                </div>
                            </li>
                            <li id="spacheMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Spache</span>
                                    
                                    </div>
                                    <div class="value-container">{{ spache }}</div>
                                </div>
                            </li>
                            <li id="DaleChallMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">
                                            Dale-Chall
                                            <i class="fas fa-info-circle info-icon"
                                            data-img="/assets/img/dale_chall_info.png"
                                            style="cursor:pointer;" title="Click to view image"></i>
                                        </span>
                                    </div>
                                    <div class="value-container">{{ dale_chall }}</div>
                                </div>
                            </li>

                            <li id="ARIMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">
                                            ARI
                                            <i class="fas fa-info-circle info-icon"
                                            data-img="/assets/img/ari_info.png"
                                            style="cursor:pointer;" title="Click to view image"></i>
                                        </span>
                                    </div>
                                    <div class="value-container">{{ ari }}</div>
                                </div>
                            </li>

                            <li id="ColemanLiauMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Coleman-Liau</span>
                                    </div>
                                    <div class="value-container">{{ coleman_liau }}</div>
                                </div>
                            </li>
                            <li id="LixMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Lix</span>
                                    </div>
                                    <div class="value-container">{{ lix }}</div>
                                </div>
                            </li>
                            <li id="RIXMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">RIX</span>
                                    </div>
                                    <div class="value-container">{{ rix }}</div>
                                </div>
                            </li>
                            
                            <li id="SMOGMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">SMOG</span>
                                    </div>
                                    <div class="value-container">{{ smog }}</div>
                                </div>
                            </li>

                            <hr style="background-color: white;">

                            <li id="wordCountMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Total Words</span>
                                    </div>
                                    <div class="value-container">{{ word_count }}</div>
                                </div>
                            </li>
                            <li id="totalWordsNoProper">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Total Words (-proper)</span>
            
                                    </div>
                                    <div class="value-container">{{ total_words_no_proper }}</div>
                                </div>
                            </li>
                            <li id="vocabSizeMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Unique Words</span>
                                    
                                    </div>
                                    <div class="value-container">{{ vocab_size }}</div>
                                </div>
                            </li>
                            <li id="uniqueWordsNoProper">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Unique Words (-proper)</span>
                                    
                                    </div>
                                    <div class="value-container">{{ unique_words_no_proper }}</div>
                                </div>
                            </li>
                            <li id="avgWordLength">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Average Word Length</span>
                                        
                                    </div>
                                    <div class="value-container">{{ avg_word_length }}</div>
                                </div>
                            </li>
                            <li id="lexDensityMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Lexical Density</span>
                                        
                                    </div>
                                    <div class="value-container">{{ lexical_density }}</div>
                                </div>
                            </li>
                            <li id="lexSophisticationMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Lexical Sophistication</span>
                                        
                                    </div>
                                    <div class="value-container">{{ lexical_sophistication }}</div>
                                </div>
                            </li>

                            <hr style="background-color: white;">

                            <li id="lexicalVariation" style="text-align:left;">
                                <span class="label">Lexical Variation</span>
                                <ul style="padding-left: 20px;">
                                    <li id="cttrMetric">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">CTTR</span>
                                                
                                            </div>
                                            <div class="value-container">{{ lexical_variation[2] }}</div>
                                        </div>
                                    </li>
                                    <li id="logTTRMetric">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">LogTTR</span>
                                                
                                            </div>
                                            <div class="value-container">{{ lexical_variation[3] }}</div>
                                        </div>
                                    </li>
                                    <li id="rttrMetric">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">Root TTR</span>
                                                
                                            </div>
                                            <div class="value-container">{{ lexical_variation[1] }}</div>
                                        </div>
                                    </li>
                                    <li id="ttrMetric">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">TTR</span>
                                                
                                            </div>
                                            <div class="value-container">{{ lexical_variation[0] }}</div>
                                        </div>
                                    </li>
                                </ul>
                            </li>

                            <hr style="background-color: white;">

                            <li id="freqBinFreqs" style="text-align:left;">
                                <span class="label">Frequency Bin Count</span>
                                <ul style="padding-left: 20px;">
                                    <li id="freq_0_200">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">0-200</span>
                            
                                            </div>
                                            <div class="value-container">{{ freq1 }}%</div>
                                        </div>
                                    </li>
                                    <li id="freq_201_500">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">201-500</span>
                                    
                                            </div>
                                            <div class="value-container">{{ freq2 }}%</div>
                                        </div>
                                    </li>
                                    <li id="freq_501_1000">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">501-1000</span>
                                    
                                            </div>
                                            <div class="value-container">{{ freq3 }}%</div>
                                        </div>
                                    </li>
                                    <li id="freq_1001_1500">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">1001-1500</span>
                                    
                                            </div>
                                            <div class="value-container">{{ freq4 }}%</div>
                                        </div>
                                    </li>
                                    <li id="freq_1501_2500">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">1501-2500</span>
                                    
                                            </div>
                                            <div class="value-container">{{ freq5 }}%</div>
                                        </div>
                                    </li>
                                    <li id="freq_2500_plus">
                                        <div class="list-item-container">
                                            <div class="label-container">
                                                <span class="label">2500+</span>
                                    
                                            </div>
                                            <div class="value-container">{{ freq6 }}%</div>
                                        </div>
                                    </li>
                                </ul>
                            <li id="hapaxPercentMetric">
                                <div class="list-item-container">
                                    <div class="label-container">
                                        <span class="label">Hapax Percentage</span>
                            
                                    </div>
                                    <div class="value-container">{{ hapax_percentage }}%</div>
                                </div>
                            </li>
                            
                        </ul>
                    </div>

                    <!-- Plots Section -->
                    <div class="grid-item" id="plots-section">
                        <h2>Plots</h2>
                        <div id="plots">
                            <img id="freqPlot" class="plot-img"
                                src="{{ request.url_for('plots', path=freq_plot_path) }}" alt="Plot Image">
                            <img id="cumLexPlot" class="plot-img"
                                src="{{ request.url_for('plots', path=cum_lex_plot_path) }}" alt="Plot Image">
                            <img id="linLexPlot" class="plot-img"
                                src="{{ request.url_for('plots', path=lin_lex_plot_path) }}" alt="Plot Image">
                            <img id="freqBinPlot" class="plot-img"
                                src="{{ request.url_for('plots', path=freq_bins_plot_path) }}" alt="Plot Image">
                        </div>
                    </div>
                    <!-- Plot Modal -->
                    <div id="plotModal" class="modal">
                        <span class="close">&times;</span>
                        <img class="plot-modal-content" id="img01">
                        <div id="caption"></div>
                    </div>
                    <!-- Hapax Legomena Section -->
                    <div class="grid-item" id="hapax-section">
                        <div style="margin-bottom: 20px;">
                            <h2>20 Most Characteristic Words <i class="fas fa-info-circle"
                                    data-toggle="tooltip" data-placement="top"
                                    title="Top 20 most frequent words in this text not in the Diederich 300"
                                    data-trigger="hover"></i></h2>
                            <button type="button" class="collapsible"></button>
                            <div class="content" style="min-height: fit-content;">
                                <ul class="statistics-list" >
                                    {% for word in top20_NoDie300 %}
                                        <li>{{ word }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        <h2>Hapax Legomena <i class="fas fa-info-circle"
                                data-toggle="tooltip" data-placement="top" title="Words occurring only once in a text"
                                data-trigger="hover"></i></h2>
                        
                        <button type="button" class="collapsible"></button>
                        <div class="content">
                            <ul class="statistics-list scrollable">
                                {% for word in hapax_legonema %}
                                <li>{{ word }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
</body>



{% block scripts %}
<!--Script to make the hapax legonema section collapsible -->
<script>
    // 
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        var content = coll[i].nextElementSibling;
        content.style.maxHeight = content.scrollHeight + "px"; // This will expand the content by default

        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            }
        });
    }
</script>
<!-- Enlarge Plots -->
<script>

    // Get the modal
    var modal = document.getElementById("plotModal");
    
    // Select all plot images
    var plotImages = document.querySelectorAll(".plot-img");
    
    // Add a click event listener to each image
    plotImages.forEach(function (img) {
        img.addEventListener("click", function () {
            // Show the modal
            modal.style.display = "block";
            // Get the image and insert it inside the modal
            var modalImg = document.getElementById("img01");
            modalImg.src = this.src;
        });
    });
    
    var infoIcons = document.querySelectorAll(".info-icon");
    infoIcons.forEach(function (icon) {
        icon.addEventListener("click", function () {
            var imgPath = this.getAttribute("data-img");
            if (imgPath) {
                modal.style.display = "block";
                var modalImg = document.getElementById("img01");
                modalImg.src = imgPath;
            }
        });
    });

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the image, close the modal
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
<!-- Toggle Metrics Buttons -->
<script>
    function toggleMetrics() {
        var checkbox = document.getElementById("metricsCheckbox");
        var section = document.getElementById("metrics-section");

        if (checkbox.checked) {
            section.style.display = "block";
        } else {
            section.style.display = "none";
        }
    }
    function toggleWordCount() {
        var checkbox = document.getElementById("wordCountCheckbox");
        var metric = document.getElementById("wordCountMetric");

        if (checkbox.checked) {
            metric.style.display = "block";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleVocabSize() {
        var checkbox = document.getElementById("vocabSizeCheckbox");
        var metric = document.getElementById("vocabSizeMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleWordCountNoProper() {
        var checkbox = document.getElementById("wordCountNoProperCheckbox");
        var metric = document.getElementById("totalWordsNoProper");

        if (checkbox.checked) {
            metric.style.display = "block";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleVocabSizeNoProper() {
        var checkbox = document.getElementById("vocabSizeNoProperCheckbox");
        var metric = document.getElementById("uniqueWordsNoProper");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleAverageWordLength() {
        var checkbox = document.getElementById("avgWordCheckbox");
        var metric = document.getElementById("avgWordLength");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleLexicalDensity() {
        var checkbox = document.getElementById("lexDensityCheckbox");
        var metric = document.getElementById("lexDensityMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }

    function toggleLexicalSophistication() {
        var checkbox = document.getElementById("lexicalSophisticationCheckbox");
        var metric = document.getElementById("lexSophisticationMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleLexVar() {
        var checkbox = document.getElementById("lexVarCheckbox");
        var metric = document.getElementById("lexicalVariation");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleTTR() {
        var checkbox = document.getElementById("ttrCheckbox");
        var metric = document.getElementById("ttrMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }

    function toggleRootTTR() {
        var checkbox = document.getElementById("rootTtrCheckbox");
        var metric = document.getElementById("rttrMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }

    function toggleCTTR() {
        var checkbox = document.getElementById("cttrCheckbox");
        var metric = document.getElementById("cttrMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }

    function toggleLogTTR() {
        var checkbox = document.getElementById("logTtrCheckbox");
        var metric = document.getElementById("logTTRMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }

    function toggleLexR() {
        var checkbox = document.getElementById("lexrCheckbox");
        var metric = document.getElementById("lexRMetric");

        if (checkbox.checked) {
            metric.style.display = "list-item";
        } else {
            metric.style.display = "none";
        }
    }
    function toggleHapax() {
        var checkbox = document.getElementById("hapaxCheckbox");
        var section = document.getElementById("hapax-section");

        if (checkbox.checked) {
            section.style.display = "block";
        } else {
            section.style.display = "none";
        }
    }


    function togglePlots() {
        var checkbox = document.getElementById("plotsCheckbox");
        var section = document.getElementById("plots-section");

        if (checkbox.checked) {
            section.style.display = "block";
        } else {
            section.style.display = "none";
        }
    }
    function toggleFreqPlot() {
        var checkbox = document.getElementById("freqPlotCheckbox");
        var plot = document.getElementById("freqPlot");

        if (checkbox.checked) {
            plot.style.display = "block";
        } else {
            plot.style.display = "none";
        }
    }

    function toggleLinLexPlot() {
        var checkbox = document.getElementById("linLexPlotCheckbox");
        var plot = document.getElementById("linLexPlot");

        if (checkbox.checked) {
            plot.style.display = "block";
        } else {
            plot.style.display = "none";
        }
    }
    function toggleCumLexPlot() {
        var checkbox = document.getElementById("cumLexPlotCheckbox");
        var plot = document.getElementById("cumLexPlot");

        if (checkbox.checked) {
            plot.style.display = "block";
        } else {
            plot.style.display = "none";
        }
    }
    function toggleFreqBinPlot() {
        var checkbox = document.getElementById("freqBinPlotCheckbox");
        var plot = document.getElementById("freqBinPlot");

        if (checkbox.checked) {
            plot.style.display = "block";
        } else {
            plot.style.display = "none";
        }
    }
</script>
<!-- Slideout Options animation -->
<script>
    document.getElementById('slideOutTab').addEventListener('click', function () {
        var slideOut = document.getElementById('slideOut');
        slideOut.style.right = slideOut.style.right === '0px' ? '-300px' : '0px';
    });
</script>
<!-- Print and Export -->
<script>
    function printData() {
        let checkboxes = document.querySelectorAll('.custom-control-input');
        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
                let correspondingSection = document.getElementById(checkbox.id + 'Section');
                window.print(correspondingSection);
            }
        });
    }


    function get_pdf() {
        let doc = new jsPDF();
        let checkboxes = document.querySelectorAll('.custom-control-input');
        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
                let correspondingSection = document.getElementById(checkbox.id + 'Section');
                doc.text(correspondingSection.innerText, 10, 10);  // This is a very basic way to add text to a PDF. Depending on the structure of your sections, you might need to do something more complex.
            }
        });
        doc.save('export.pdf');
    }
</script>
<!-- For i info buttons (LEAVE DUPLICATE jQUERY AND BOOTSTRAP INSTALLS OUT-->
<!-- Add jQuery -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
<!-- Add Bootstrap JS -->
<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"> -->

</script>
<!-- Initialize tooltips -->
<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
</script>

{% endblock %}
{% endblock %}