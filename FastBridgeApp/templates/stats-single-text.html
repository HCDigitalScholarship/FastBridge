{% extends "base.html" %}
{% block content %}
<style>
     body {
        padding-top: 15px; /* Space between the navigation menu and the title */
        padding-bottom: 30px; /* Space between the footer and the grid container */
    }
    h3 {
        font-size: 18px;
    }
    .statistics-list {
        list-style-type: none; /* removes bullet points */
        text-align: left; /* aligns text to the left */
        width: fit-content; /* fits the width to its content */
        margin: 0 auto; /* centers the block */
        padding: 0;
    }
    .statistics-list li {
        font-size: 16px;
        padding: 5px 0; /* adds some vertical spacing between list items */
    }
    .statistics-list .label {
        font-weight: bold; /* makes the label bold */
        padding-right: 10px; /* adds some space between label and value */
    }
    .collapsible {
        cursor: pointer;
        text-align: left;
        outline: none;
        width: 100%;
        border: none;
        background-color: transparent;
        color: white;
        font-size: 18px;
    }

    .content {
        padding: 0 18px;
        /*max-height: 0;*/
        overflow: hidden;
        transition: max-height 0.2s ease-out;
    }
    .content ul {
        display: flex;
        flex-wrap: wrap;
        padding: 0;
    }

    .content ul li {
        margin-right: 10px;
        list-style: none;
    }
    .page-title {
    text-align: center;
    background-color: rgba(0, 0, 0, 0.6);
    padding: 15px 20px;
    margin-top: 30px; /* Space between navigation bar and title box */
    margin-bottom: 20px; /* space between the title and the grid container */
    }

    .grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr; /* creates 3 equal-width columns */
    gap: 20px; /* adds some gap between the grid items */
    margin-bottom: 30px; /* Space between the grid container and the footer */
    }
    

    .grid-item {
    background-color: rgba(0, 0, 0, 0.6); /* same as your original color */
    padding: 15px 20px;
    }

    .plot-img {
    width: 100%;
    transition: transform 0.25s ease-in-out;
    cursor: zoom-in;
    margin-bottom: 20px; /* Add space between the images */
    }

    .plot-img.enlarged {
        transform: scale(3); /* Triple the size of the image when it's clicked */
        cursor: zoom-out;
        z-index: 10; 
        position: relative; 
    }

</style>


<body id="page-top">
    <header class="masthead" style="background-image: url('/assets/img/stats_background_2.jpg') ;background-size: cover;">
        <div class="intro-body">
            <div class="container">
                <div class="page-title">
                    <p class="intro-text" style="font-family: Cabin, sans-serif;font-size: 30px;margin-bottom: 45px;font-weight: normal;margin-top: 120px;">
                        Readability Statistics for ...</p>
                        <h1 style="font-family: 'Times New Roman', serif; font-size: 40px; margin-bottom: 45px; font-weight: normal; color: #ffffff;">{{ text_name }}</h1>
                        <h2 style="font-family: Actor, sans-serif; font-size: 28px; color: #ffffff; margin-bottom: 15px; font-weight: normal; font-style: normal;">
                            Start: <span style="font-family: 'Times New Roman', serif; font-size: 24px;">{{ start_section }}</span>  
                            End: <span style="font-family: 'Times New Roman', serif; font-size: 24px;">{{ end_section }}</span>
                        </h2>
                </div>
                <div class="grid-container">
                    <!-- Metrics Section -->
                    <div class="grid-item" id="metrics-section">
                        <h2>Metrics</h2>
                        <ul class="statistics-list">
                            <li><span class="label">Number of Words:</span> {{ word_count }}</li>
                            <li><span class="label">Vocab Size:</span> {{ vocab_size }}</li>
                            <li><span class="label">Lexical Density:</span> {{ lexical_density }}</li>
                            <li><span class="label">Lexical Sophistication:</span> {{ lexical_sophistication }}</li>
                            <li><span class="label">TTR:</span> {{ lexical_variation[0] }}</li>
                            <li><span class="label">Root TTR:</span> {{ lexical_variation[1] }}</li>
                            <li><span class="label">CTTR:</span> {{ lexical_variation[2] }}</li>
                            <li><span class="label">LogTTR:</span> {{ lexical_variation[3] }}</li>
                            <li><span class="label">LexR:</span> {{ LexR }}</li>
                        </ul>
                    </div>
                    <!-- Hapax Legomena Section -->
                    <div class="grid-item" id="hapax-section">
                        <h2>Hapax Legomena</h2>
                        <button type="button" class="collapsible">Expand List:</button>
                        <div class="content">
                            <ul class="statistics-list" style="max-height: 300px; overflow-y: scroll;">
                                {% for word in hapax_legonema %}
                                    <li>{{ word }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- Plots Section -->
                    <div class="grid-item" id="plots-section">
                        <h2>Plots</h2>
                        <div id="plots">
                            <img class="plot-img" src="{{ request.url_for('plots', path=freq_plot_path) }}" alt="Plot Image">
                            <img class="plot-img" src="{{ request.url_for('plots', path=lin_lex_plot_path) }}" alt="Plot Image">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
</body>
{% block scripts %}
<script>
    // Script to make the hapax legonema section collapsible
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        var content = coll[i].nextElementSibling;
        content.style.maxHeight = content.scrollHeight + "px"; // This will expand the content by default

        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight){
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            } 
        });
    }
</script>
<script>
    // Select all plot images
    var plotImages = document.querySelectorAll(".plot-img");
    
    // Add a click event listener to each image
    plotImages.forEach(function(img) {
        img.addEventListener("click", function() {
            // Toggle the "enlarged" class on click
            this.classList.toggle("enlarged");
        });
    });
    </script>
{% endblock %}
{% endblock %}